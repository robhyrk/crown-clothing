{"ast":null,"code":"var _jsxFileName = \"/Users/robhyrk/Documents/dev/courses/crwn-clothing-v2/src/context/user.context.jsx\",\n    _s = $RefreshSig$();\n\nimport { createContext, useEffect, useReducer } from 'react';\nimport { onAuthStateChangedListener, createUserDocumentFromAuth } from '../utils/firebase/firebase.utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const UserContext = /*#__PURE__*/createContext({\n  currentUser: null,\n  setCurrentUser: () => null\n});\nconst USER_ACTION_TYPES = {\n  SET_CURRENT_USER: 'SET_CURRENT_USER'\n};\nconst INITIAL_STATE = {\n  currentUser: null\n};\n\nconst userReducer = (state, action) => {\n  const {\n    type,\n    payload\n  } = action;\n  console.log(action);\n\n  switch (type) {\n    case 'SET_CURRENT_USER':\n      return { ...state,\n        currentUser: payload\n      };\n\n    default:\n      throw new Error(`Unhandled type ${type} in userReducer`);\n  }\n};\n\nexport const UserProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [{\n    currentUser\n  }, dispatch] = useReducer(userReducer, INITIAL_STATE);\n  console.log(currentUser);\n\n  const setCurrentUser = user => {\n    dispatch({\n      type: USER_ACTION_TYPES.SET_CURRENT_USER,\n      payload: user\n    });\n  };\n\n  const value = {\n    currentUser,\n    setCurrentUser\n  }; // useEffect(() => {\n  //     const unsubscribe = onAuthStateChangedListener((user)=>{\n  //         if(user){\n  //             createUserDocumentFromAuth(user)\n  //         }\n  //      setCurrentUser(user)\n  //     })\n  //     return unsubscribe\n  //  }, [])\n\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 12\n  }, this);\n};\n\n_s(UserProvider, \"9cja+4llKDgYZHGnWTqV3W5xAwQ=\");\n\n_c = UserProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"sources":["/Users/robhyrk/Documents/dev/courses/crwn-clothing-v2/src/context/user.context.jsx"],"names":["createContext","useEffect","useReducer","onAuthStateChangedListener","createUserDocumentFromAuth","UserContext","currentUser","setCurrentUser","USER_ACTION_TYPES","SET_CURRENT_USER","INITIAL_STATE","userReducer","state","action","type","payload","console","log","Error","UserProvider","children","dispatch","user","value"],"mappings":";;;AAAA,SAAQA,aAAR,EAAuBC,SAAvB,EAAkCC,UAAlC,QAAmD,OAAnD;AACA,SAASC,0BAAT,EAAqCC,0BAArC,QAAuE,kCAAvE;;AAEA,OAAO,MAAMC,WAAW,gBAAGL,aAAa,CAAC;AACrCM,EAAAA,WAAW,EAAE,IADwB;AAErCC,EAAAA,cAAc,EAAE,MAAM;AAFe,CAAD,CAAjC;AAKP,MAAMC,iBAAiB,GAAG;AACtBC,EAAAA,gBAAgB,EAAE;AADI,CAA1B;AAIA,MAAMC,aAAa,GAAG;AAClBJ,EAAAA,WAAW,EAAE;AADK,CAAtB;;AAIA,MAAMK,WAAW,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;AACnC,QAAM;AAACC,IAAAA,IAAD;AAAOC,IAAAA;AAAP,MAAkBF,MAAxB;AACAG,EAAAA,OAAO,CAACC,GAAR,CAAYJ,MAAZ;;AACA,UAAOC,IAAP;AACI,SAAK,kBAAL;AACI,aAAO,EACH,GAAGF,KADA;AAEHN,QAAAA,WAAW,EAAES;AAFV,OAAP;;AAIJ;AACI,YAAM,IAAIG,KAAJ,CAAW,kBAAiBJ,IAAK,iBAAjC,CAAN;AAPR;AASH,CAZD;;AAcA,OAAO,MAAMK,YAAY,GAAG,QAAgB;AAAA;;AAAA,MAAf;AAACC,IAAAA;AAAD,GAAe;AACxC,QAAM,CAAC;AAACd,IAAAA;AAAD,GAAD,EAAgBe,QAAhB,IAA4BnB,UAAU,CAACS,WAAD,EAAcD,aAAd,CAA5C;AACAM,EAAAA,OAAO,CAACC,GAAR,CAAYX,WAAZ;;AAEA,QAAMC,cAAc,GAAIe,IAAD,IAAU;AAC7BD,IAAAA,QAAQ,CAAC;AAACP,MAAAA,IAAI,EAAEN,iBAAiB,CAACC,gBAAzB;AAA2CM,MAAAA,OAAO,EAAEO;AAApD,KAAD,CAAR;AACH,GAFD;;AAGA,QAAMC,KAAK,GAAG;AAACjB,IAAAA,WAAD;AAAcC,IAAAA;AAAd,GAAd,CAPwC,CASxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAO,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAEgB,KAA7B;AAAA,cAAqCH;AAArC;AAAA;AAAA;AAAA;AAAA,UAAP;AACH,CApBM;;GAAMD,Y;;KAAAA,Y","sourcesContent":["import {createContext, useEffect, useReducer} from 'react'\nimport { onAuthStateChangedListener, createUserDocumentFromAuth } from '../utils/firebase/firebase.utils'\n\nexport const UserContext = createContext({\n    currentUser: null,\n    setCurrentUser: () => null\n})\n\nconst USER_ACTION_TYPES = {\n    SET_CURRENT_USER: 'SET_CURRENT_USER'\n}\n\nconst INITIAL_STATE = {\n    currentUser: null\n}\n\nconst userReducer = (state, action) => {\n    const {type, payload} = action\n    console.log(action)\n    switch(type) {\n        case 'SET_CURRENT_USER':\n            return {\n                ...state,\n                currentUser: payload\n            }\n        default: \n            throw new Error(`Unhandled type ${type} in userReducer`)\n    }\n}\n\nexport const UserProvider = ({children}) => {\n    const [{currentUser}, dispatch] = useReducer(userReducer, INITIAL_STATE)\n    console.log(currentUser)\n    \n    const setCurrentUser = (user) => {\n        dispatch({type: USER_ACTION_TYPES.SET_CURRENT_USER, payload: user})\n    }\n    const value = {currentUser, setCurrentUser}\n\n    // useEffect(() => {\n    //     const unsubscribe = onAuthStateChangedListener((user)=>{\n    //         if(user){\n    //             createUserDocumentFromAuth(user)\n    //         }\n    //      setCurrentUser(user)\n    //     })\n    //     return unsubscribe\n    //  }, [])\n\n    return <UserContext.Provider value={value}>{children}</UserContext.Provider>\n}"]},"metadata":{},"sourceType":"module"}